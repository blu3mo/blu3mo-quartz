---
title: 早押しクイズアプリの実装
---

* 学校のイベント用に作ったやつ

* Qiitaに書いた
  
  * [https://qiita.com/Bluemo/items/cb1a07c88cb81d5ae406](https://qiita.com/Bluemo/items/cb1a07c88cb81d5ae406)
* *Multipeer Conectivity*を使った

 > 
 > 仕組み
 > Multipeer ConnectivityはBluetooth等を用いて通信しています。
 > 通信のメッセージが届くのにラグがあるため、二つの起こりうるパターンが考えられます。
 > それぞれのパターンで先に押した方を判定するために、以下のような通信が行われます。
 > 
 > 1. 一方がもう一方より圧倒的に早く押した場合
 >    （以下の「勝ち」「負け」は、どちらが先に押したかの判定を意味します。）
 >    早く押された方の端末をAとした場合、以下の図のようになります。
 > 
 > 1. Aは、Bにボタンが押された時の時間を伝えます。
 > 
 > 1. Bの方はボタンがまだ押されていないので、Bは負けを画面上に表示します。
 > 
 > 1. しかし、この時点ではA端末側は自分が勝ったかどうかは分かりません。そのため、Bは負けを表示した後に、Aに「Bが負けたこと」を伝えます。
 > 
 > 1. Aは、そのメッセージを受け取ると自身が勝ったことが分かり、画面上に勝ちを表示します。
 > 
 > 1. 二チームのタイミングが僅差だった場合
 >    Aのメッセージが発信されてから届くまでの間に、Bが押された場合は、以下のようになります。
 > 
 > 1. Aが押されると、先ほどと同様にBに押された時の時間を送信します。
 > 
 > 1. それをBが受け取る前にBも押され、Bが押された時の時間をAに送信します。
 > 
 > 1. その後、BにAからの通信が届きます。Bは、自身が押された時間とAが押された時間を比較します。すると、Bは自身が負けたことが分かり、画面上に負けを表示します。
 > 
 > 1. 同様に、AにBからの通信が届くと、時間を比較することで自身が勝ったことが分かり、画面上に勝ちを表示します。
