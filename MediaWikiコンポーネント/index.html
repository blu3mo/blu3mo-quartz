<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="from [[Wikichase実装ログ]]
  つくる
  リンク遷移がちゃんと成り立つようにすべきだな
 formsみたいな感じでイベントハンドラをpropsで持てば良いのか  EventHandlerを継承すると良いことあるのかな  継承というか、既存のを使う感じか  any型で諦めない React.EventCallback - Qiita     ."><title>MediaWikiコンポーネント</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://blu3mo.github.io/blu3mo-quartz/icon.png><link href=https://blu3mo.github.io/blu3mo-quartz/styles.fafd0e5f154beb0b7536dee6a537f5d1.min.css rel=stylesheet><link href=https://blu3mo.github.io/blu3mo-quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://blu3mo.github.io/blu3mo-quartz/js/darkmode.e71aa3b6f2d32757a64af57a8e571c25.min.js></script>
<script src=https://blu3mo.github.io/blu3mo-quartz/js/util.5e39932758f9ecaf45fd54506ed61416.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://blu3mo.github.io/blu3mo-quartz/js/popover.6da9b273c092cc16fc1aa904d71a2163.min.js></script>
<script src=https://blu3mo.github.io/blu3mo-quartz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://blu3mo.github.io/blu3mo-quartz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://blu3mo.github.io/blu3mo-quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://blu3mo.github.io/blu3mo-quartz",fetchData=Promise.all([fetch("https://blu3mo.github.io/blu3mo-quartz/indices/linkIndex.d6548f58e39030fab3a745983b2d9369.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://blu3mo.github.io/blu3mo-quartz/indices/contentIndex.7334169a1d411743b9616719fb82ecc4.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://blu3mo.github.io/blu3mo-quartz",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://blu3mo.github.io/blu3mo-quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:2,depth:2,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.7,linkDistance:1,opacityScale:5,repelForce:.7,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/blu3mo.github.io\/blu3mo-quartz\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://blu3mo.github.io/blu3mo-quartz/js/full-text-search.51f0b1753e9b30839d053f8a98cc20d1.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://blu3mo.github.io/blu3mo-quartz>Bluemo's Brain</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><div class=pageBody><article><h1>MediaWikiコンポーネント</h1><p class=meta>Last updated
Unknown
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/MediaWiki%e3%82%b3%e3%83%b3%e3%83%9d%e3%83%bc%e3%83%8d%e3%83%b3%e3%83%88.md rel=noopener>Edit Source</a></p><ul class=tags></ul><p>from <a href=/blu3mo-quartz/Wikichase%E5%AE%9F%E8%A3%85%E3%83%AD%E3%82%B0 rel=noopener class=internal-link data-src=/blu3mo-quartz/Wikichase%E5%AE%9F%E8%A3%85%E3%83%AD%E3%82%B0>Wikichase実装ログ</a></p><ul><li><p>つくる</p></li><li><p>リンク遷移がちゃんと成り立つようにすべきだな</p><ul><li>formsみたいな感じでイベントハンドラをpropsで持てば良いのか<ul><li>EventHandlerを継承すると良いことあるのかな<ul><li>継承というか、既存のを使う感じか</li><li><a href=https://qiita.com/Takepepe/items/f1ba99a7ca7e66290f24 rel=noopener>any型で諦めない React.EventCallback - Qiita</a></li></ul></li></ul></li><li>.replaceってやつでいけそう<img src=https://scrapbox.io/api/pages/blu3mo-public/blu3mo/icon alt=blu3mo.icon height=19.5><ul><li><a href=https://kray.jp/blog/react-html-parser/ rel=noopener>https://kray.jp/blog/react-html-parser/</a></li></ul></li></ul></li><li><p>いい感じにできたらnpmとかで公開したいなと思ってたけど、これMediaWikiに正確に対応するの辛いな</p><ul><li>MediaWikiの仕様を理解しないといけない<ul><li>Wikipediaさえそれっぽく表示できればいいので、そこまでのモチベはない</li></ul></li></ul></li><li><p><a href=https://www.mediawiki.org/wiki/API:Parsing_wikitext rel=noopener>API:Parsing wikitext - MediaWiki</a></p><ul><li>色々paramsあるな（<a href=/blu3mo-quartz/Github-Copilot rel=noopener class=internal-link data-src=/blu3mo-quartz/Github-Copilot>Github Copilot</a>の推薦で気づいた）</li></ul></li><li><p>useMediaWikiHTML()を作る</p></li><li><p>WikipediaをMediaWikiに一般化</p><ul><li>継承とかではなく、関数コンポーネントを入れ子にする形でspecializeしろと</li><li><a href=https://ja.reactjs.org/docs/composition-vs-inheritance.html rel=noopener>コンポジション vs 継承 – React</a></li></ul></li><li><p>MediawikiのCSSを使いたい</p><ul><li><a href=https://yamory.io/blog/about-gpl-license/ rel=noopener>https://yamory.io/blog/about-gpl-license/</a></li><li>コードに組み込むなら派生物もGPLライセンスにしないとなのね<ul><li><code>https://ja.wikipedia.org/w/load.php?lang=ja&modules=ext.cite.styles%7Cext.uls.interlanguage%7Cext.visualEditor.desktopArticleTarget.noscript%7Cext.wikimediaBadges%7Cjquery.makeCollapsible.styles%7Cmediawiki.page.gallery.styles%7Cskins.vector.styles.legacy%7Cwikibase.client.init&only=styles&skin=vector</code></li><li>から引っ張ってこれるな<ul><li>良いのかな</li></ul></li></ul></li><li><a href=https://github.com/wikimedia/mediawiki/tree/130b9b05fcd7ee8830ebb55b01ed5c7a814042a5/resources/src rel=noopener>mediawiki/resources/src at 130b9b05fcd7ee8830ebb55b01ed5c7a814042a5 · wikimedia/mediawiki · GitHub</a><ul><li>ここにcssあるな</li><li><a href=/blu3mo-quartz/MediaWiki%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88#6213c0ce79e1130000943836 rel=noopener class=internal-link data-src=/blu3mo-quartz/MediaWiki%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88>MediaWikiコンポーネント</a>のurlはこれらをbundleしてる感じかな?<ul><li>modulesが
_</li></ul></li></ul></li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ext.cite.styles
</span></span><span class=line><span class=cl>ext.uls.interlanguage
</span></span><span class=line><span class=cl>ext.visualEditor.desktopArticleTarget.noscript
</span></span><span class=line><span class=cl>ext.wikimediaBadges
</span></span><span class=line><span class=cl>jquery.makeCollapsible.styles
</span></span><span class=line><span class=cl>mediawiki.page.gallery.styles
</span></span><span class=line><span class=cl>skins.vector.styles.legacy
</span></span><span class=line><span class=cl>wikibase.client.init
</span></span></code></pre></td></tr></table></div></div><pre><code>            - 5,6行目は[https://github.com/wikimedia/mediawiki/tree/130b9b05fcd7ee8830ebb55b01ed5c7a814042a5/resources/src](https://github.com/wikimedia/mediawiki/tree/130b9b05fcd7ee8830ebb55b01ed5c7a814042a5/resources/src) を参照してるな
            - `wikibase.client.init`はこれか
                - [Extension:Wikibase Client - MediaWiki](https://www.mediawiki.org/wiki/Extension:Wikibase_Client/ja)
            - というか`skins.vector.styles.legacy`だけで良いみたい?
                - 他のmoduleのcssは何なんだろう、わからん
                    - 「あれ、これwikipediaと違う」となったら調べればいいか
                - mediawikiページだと`skins.vector.icons,styles`だ
                    - `skins.vector.styles`だけでもいけるな
                    - ようわからんけどlegacyじゃ無いほうが良いだろう
            - で、結局ソースは?
                - <a class="internal-link broken">MediaWiki</a>のSkinが何なのかを把握しよう
                    - あ〜〜、Vectorという名前のSkinがあるのね
                    - [https://www.mediawiki.org/wiki/Skin:Vector/en](https://www.mediawiki.org/wiki/Skin:Vector/en)
                        - &gt; GNU General Public License 2.0 or later
- Vector CSSの上に、Wikipediaのcommon.cssも重なってるのか
    - [https://en.wikipedia.org/wiki/MediaWiki:Common.css](https://en.wikipedia.org/wiki/MediaWiki:Common.css)
    - 言語によって細かい違いがあるな
        - 出典不足のラベルのサイズが違うとか
        - とりあえず面倒なので雑にjaのcssを読み込んでおく
            - webpackとか使ったちゃんとした読み込み方は後で考える
- まあ細かいparamsとかは置いといて、Vector + Wikipedia Common.cssでWikipediaっぽくなる
    - wikipedia.orgのmoduleで`site.styles`を指定するとcommon.css他がもらえる
- つまり`https://wikipedia.org/w/load.php?lang=ja&amp;modules=skins.vector.styles|site.styles&amp;only=styles`で欲しいcssは取得できる
- ただ、問題はこれが権利的にどうなのか
- CSS自体はGPL Licenseっぽい
    - [https://www.gnu.org/licenses/gpl-faq.en.html](https://www.gnu.org/licenses/gpl-faq.en.html)
    - &gt; When we say “copy code,” we mean just that: you're taking a section of code from one source, with or without modification, and inserting it into your own program, thus forming a work based on the first section of code. “Use a library” means that you're not copying any source directly, but instead interacting with it through linking, importing, or other typical mechanisms that bind the sources together when you compile or run the code.
        - use a libraryはコピペとは別扱いなのね
    - あ〜、でも派生物も<a class="internal-link broken">GPL</a>で公開しないと?
- というかWikipediaの内容自体にも権利あるか
    - [Wikipedia:ウィキペディアを二次利用する - Wikipedia](https://ja.wikipedia.org/wiki/Wikipedia:ウィキペディアを二次利用する)
    - <a class="internal-link broken">CC BY-SA 3.0</a>か
        - Credit表記すればセーフ
    - 画像は違う場合もあるよ、と
        - え〜〜、
        - あーでも基本二次利用可な画像か
            - [Wikipedia:画像利用の方針 - Wikipedia](https://ja.wikipedia.org/wiki/Wikipedia:画像利用の方針)
        - でも保証は無いよな、大丈夫なのだろうか
            - Wikipediaに権利的にまずい画像が載ると、巻き添えをくらう</code></pre></article><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/blu3mo-quartz/MediaWiki%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88/ data-ctx=MediaWikiコンポーネント#6213c0ce79e1130000943836 data-src=/MediaWiki%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88 class=internal-link>MediaWikiコンポーネント</a></li><li><a href=/blu3mo-quartz/Wikichase%E5%AE%9F%E8%A3%85%E3%83%AD%E3%82%B0/ data-ctx=MediaWikiコンポーネント data-src=/Wikichase%E5%AE%9F%E8%A3%85%E3%83%AD%E3%82%B0 class=internal-link>Wikichase実装ログ</a></li></ul></div></div><hr><div class=page-end id=footer><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://blu3mo.github.io/blu3mo-quartz/js/graph.67d4e06133468058f281ceef57642cf3.js></script></div></div><div id=contact_buttons><footer><p>Made by bluemo using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2022</p><ul><li><a href=https://blu3mo.github.io/blu3mo-quartz>Home</a></li><li><a href=https://twitter.com/blu3mo>Twitter</a></li><li><a href=https://github.com/blu3mo>Github</a></li></ul></footer></div></div></body></html>