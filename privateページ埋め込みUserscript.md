---
title: privateãƒ˜ã‚šãƒ¼ã‚·ã‚™åŸ‹ã‚è¾¼ã¿Userscript
---

* ä»–äººã«è¦‹ã‚‰ã‚Œã‚‹ã¨ã¾ãšã„å†…å®¹ã¯ã€[/blu3mo-private](https://scrapbox.io/blu3mo-private)ã«æ›¸ã„ã¦ã‚‹

* ã“ã‚Œã‚’ãƒ¡ã‚¤ãƒ³ã®æ–¹ã¨ç´ã¥ã‘ãŸã„ãªãƒ¼ã¨ãšã£ã¨æ€ã£ã¦ã„ãŸ
  
  * ã‚¿ã‚°ã¾ã§ç´ä»˜ã‘ãªãã¦ã„ã„ã‹ã‚‰ã€ã›ã‚ã¦åŒã˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ç®¡ç†ã—ãŸã„
* Userscriptã§*iframe*åŸ‹ã‚è¾¼ã¿ã‚’ã—ã¦ã€privateã‚’è¡¨ç¤º
  
  * ãƒšãƒ¼ã‚¸é–‹ããŸã³ã«å‹•ãã¨æ€ã£ã¦ãŸã‚‰ã€é•ã£ãŸ
  * \[/kembo/Scrapbox ã® UserScript ã§ãƒšãƒ¼ã‚¸é·ç§»ã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹æ–¹æ³•\](https://scrapbox.io/kembo/Scrapbox ã® UserScript ã§ãƒšãƒ¼ã‚¸é·ç§»ã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹æ–¹æ³•)
  * [/forum-jp/ãƒªãƒ³ã‚¯ã‚’é·ç§»ã—ãŸå¾Œã®callbackãŒæ¬²ã—ã„](https://scrapbox.io/forum-jp/ãƒªãƒ³ã‚¯ã‚’é·ç§»ã—ãŸå¾Œã®callbackãŒæ¬²ã—ã„)
  * ã“ã‚Œã§ãƒšãƒ¼ã‚¸é·ç§»æ™‚ã«å‘¼ã°ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã‹ãª
  * è¿½è¨˜
    * muta
* ä¾‹
  
  * *æƒ…å ±ç§‘å­¦ã®é”äºº ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ç™ºè¡¨è³‡æ–™*
* ã‚ã£ã¡ã‚ƒé›‘å®Ÿè£…ã ã‘ã©ã€[/bluemountain-theme](https://scrapbox.io/bluemountain-theme)ã«ç½®ã„ã¨ã„ãŸ
  
  * (ã¨ã„ã†ã‹javascriptã®å‹æ‰‹ãŒã‚ã‹ã‚‰ã‚“)
  * ã¾ã‚å‹•ãã®ã§ãƒ¨ã‚·!
    * ã“ã®æ¦‚å¿µã‚ã£ã¡ã‚ƒçŸ¥ã‚ŠãŸã„<img src='https://scrapbox.io/api/pages/blu3mo-public/tkgshn/icon' alt='tkgshn.icon' height="19.5"/>
    * 
       > 
       > Scrapboxã®UserScriptã®ç®¡ç†ãŒãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®å…¨éƒ¨ã«åæ˜ ã—ãªãã‚ƒã„ã‘ãªã„ã‹ã‚‰ã‚ã‚“ã©ãã•ã„ã‚“ã ã‘ã©ã€Githubã¨ã‹ã«.jsonç½®ã„ã¦ã€è‡ªåˆ†ã®ãƒšãƒ¼ã‚¸ã«èª­ã¿è¾¼ã¾ã›ã‚‹ã‚³ãƒ¼ãƒ‰ç½®ã„ã¨ãã ã‘ã§è‰¯ã„æ„Ÿã˜ã«ãªã‚‹ï¼Ÿ
    
    * 
       > 
       > ````
       > â€” é«˜æœ¨ä¿Šè¼” Shunsuke Takagi (@tkgshn) [March 12, 2021](https://twitter.com/tkgshn/status/1370351058917105669?ref_src=twsrc%5Etfw)
       > ````
    
    * ã“ã®importã—ã¦ã‚‹ã£ã½ã„ã‚„ã¤ã£ã¦ã©ã†ãªã£ã¦ã‚‹ã®ï¼Ÿ[blu3mo > 6044ab6079e1130000896f4c](blu3mo.md#6044ab6079e1130000896f4c)
    * [/takker/UserScriptã§ä½¿ãˆã‚‹scrapbox-parser](https://scrapbox.io/takker/UserScriptã§ä½¿ãˆã‚‹scrapbox-parser)çš„ãªæ„Ÿã˜ï¼Ÿ
      * è§£èª¬è¨˜äº‹ç­‰ã‚ã’ã¦ãã‚Œã‚‹ã¨ã‚ã‚ŠãŒãŸã„ã§ã™ğŸ¥º<img src='https://scrapbox.io/api/pages/blu3mo-public/tkgshn/icon' alt='tkgshn.icon' height="19.5"/><img src='https://scrapbox.io/api/pages/blu3mo-public/tkgshn/icon' alt='tkgshn.icon' height="19.5"/><img src='https://scrapbox.io/api/pages/blu3mo-public/tkgshn/icon' alt='tkgshn.icon' height="19.5"/><img src='https://scrapbox.io/api/pages/blu3mo-public/tkgshn/icon' alt='tkgshn.icon' height="19.5"/><img src='https://scrapbox.io/api/pages/blu3mo-public/tkgshn/icon' alt='tkgshn.icon' height="19.5"/><img src='https://scrapbox.io/api/pages/blu3mo-public/tkgshn/icon' alt='tkgshn.icon' height="19.5"/><img src='https://scrapbox.io/api/pages/blu3mo-public/tkgshn/icon' alt='tkgshn.icon' height="19.5"/>
    * <img src='https://scrapbox.io/api/pages/blu3mo-public/blu3mo/icon' alt='blu3mo.icon' height="19.5"/>ãã‚“ãªé¢å€’ãªã“ã¨ã¯ã‚„ã£ã¦ã„ãªã„
      * Scrapboxã®APIã§ã€`scrapbox.io/api/code/bluemountain-theme/XXX/script.js`ã‹ã‚‰ã€ŒXXXã€ãƒšãƒ¼ã‚¸ã®script.jsã‚’èª­ã¿è¾¼ã‚ã‚‹
      * ãã‚Œã‚’importã—ã¦ã„ã‚‹ã ã‘
* æ™®é€šã«iframeã§å‡ºã™ã ã‘ã ã¨ç´°ã™ãã‚‹ã®ã§ã€.col-pageã®max-widthåˆ¶é™ã‚’ãã®æ™‚ã ã‘å–ã‚Šæ‰•ã†ã‚ˆã†ã«ã—ãŸ

2021-05-04 20:40:22 indentãŒãšã‚Œã¦ãŸã®ã§ç›´ã—ã¾ã—ãŸ<img src='https://scrapbox.io/api/pages/blu3mo-public/takker/icon' alt='takker.icon' height="19.5"/>

* ã‚ã¨ã„ãã¤ã‹ã‚³ãƒ¼ãƒ‰ã‚’å˜ç´”åŒ–ã—ã¾ã—ãŸ
* ğŸ™ğŸ™<img src='https://scrapbox.io/api/pages/blu3mo-public/blu3mo/icon' alt='blu3mo.icon' height="19.5"/>
* indentã¯tabã«ã—ã¾ã™ã‹ï¼Ÿspaceã«ã—ã¾ã™ã‹ï¼Ÿ<img src='https://scrapbox.io/api/pages/blu3mo-public/takker/icon' alt='takker.icon' height="19.5"/>

  * <img src='https://scrapbox.io/api/pages/blu3mo-public/blu3mo/icon' alt='blu3mo.icon' height="19.5"/>ã•ã‚“ã®å¥½ã¿ã«åˆã‚ã›ãŸã„ã¨æ€ã„ã¾ã™
  * spaceã‚’ä¸€å¿œã„ã¤ã‚‚ã¯ä½¿ã£ã¦ã¾ã™<img src='https://scrapbox.io/api/pages/blu3mo-public/blu3mo/icon' alt='blu3mo.icon' height="19.5"/>

    * ï¼ˆã‚ã–ã‚ã–ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ™‡â€â™‚ï¸ğŸ™‡â€â™‚ï¸ï¼‰
    * ãŸã ã®ãŠç¯€ä»‹ãªã®ã§ãŠæ°—ã«ãªã•ã‚‰ãš<img src='https://scrapbox.io/api/pages/blu3mo-public/takker/icon' alt='takker.icon' height="19.5"/>

      * ç›®ã®å‰ã®èª²é¡Œã‚’ã‚„ã‚‹æ°—ãŒã—ãªãã¦åˆ¥ã®ã“ã¨ã—ã¦ã‚‹ã¨ã‹å£ãŒè£‚ã‘ã¦ã‚‚è¨€ãˆãªã„
        script.js

````javascript
let lastTitle = "";
function presentPrivateFrameIfInPrivatePage() {
    lastTitle = scrapbox.Page.title;
    const page = document.getElementsByClassName("page")[0]; 
    const colPage = document.getElementsByClassName("col-page")[0];
    const privateFrame = document.getElementById('privateFrame');
    privateFrame?.remove();
    const privateLink = document.getElementById('privateLink');
    privateLink?.remove();
    console.log(colPage);
    colPage.classList.remove("ignore-max-width"); 
    		
    //var pagename = document.location.pathname.split("/").pop();
````

â†‘`pagename`ã¯ãƒšãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒˆãƒ«ã§åˆã£ã¦ã„ã¾ã™ã‹ï¼Ÿ

* ã ã¨ã™ã‚‹ã¨â†“ã¯`private-`ã§å§‹ã¾ã‚‹ãƒšãƒ¼ã‚¸ã«å¯¾ã—ã¦ã®ã¿å‡¦ç†ã—ã¦ã„ã‚‹ï¼Ÿ
* ã§ã™ã€ãã†ã„ã†ä»•æ§˜ã ã£ãŸã¨æ€ã„ã¾ã™
  * ã‚ã€ä»Šã¯ä½¿ç”¨ã—ã¦ã„ãªã„æ„Ÿã˜ã§ã™ã‹ï¼Ÿ<img src='https://scrapbox.io/api/pages/blu3mo-public/takker/icon' alt='takker.icon' height="19.5"/>
  * ä»Šã¯ä½¿ã£ã¦ãªã„ã§ã™<img src='https://scrapbox.io/api/pages/blu3mo-public/blu3mo/icon' alt='blu3mo.icon' height="19.5"/>

    * ï¼ˆä»Šä¹…ã—ã¶ã‚Šã«è¦‹ã¦ã€ã‚„ã£ã±ã‚Šä¾¿åˆ©ã‹ã‚‚ã¨æ€ã„å§‹ã‚ã¦ã¾ã™ï¼‰
* Scrapboxã£ã¦ã‚³ãƒ¼ãƒ‰ä¸­ã«æ–‡å­—æŒŸã‚“ã§ã‚‚ç¹‹ãŒã‚‹ã‚“ã§ã™ã­<img src='https://scrapbox.io/api/pages/blu3mo-public/blu3mo/icon' alt='blu3mo.icon' height="19.5"/>
  script.js

````javascript
    if(!scrpabox.Page.title.startsWith("private-")) return;
    
    console.log("addFrame");
    page.insertAdjacentHTML('afterbegin',
  `<iframe id='privateFrame' style='width:100%; height:100vh;' src='https://scrapbox.io/blu3mo-private/${pagename.slice(8, pagename.length)}</iframe>`);
    page.insertAdjacentHTML('afterbegin',
  `<a id='privateLink' href='https://scrapbox.io/blu3mo-private/${scrapbox.Page.title.slice(8)}">Go to the page</a>`);
   colPage.classList.add("ignore-max-width");
}
````

script.js

````javascript
presentPrivateFrameIfInPrivatePage();

const observer = new MutationObserver((mutation)=>{
    if (lastTitle === location.href) return;
    presentPrivateFrameIfInPrivatePage();
});
observer.observe(document.getElementsByClassName("page-wrapper")[0], {attributes: true, attributeFilter: ["class"]});
````

style.css

````
 .ignore-max-width {
 	max-width: 100% !important;
 }
````
